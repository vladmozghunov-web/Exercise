using System;
using System.Linq;

public static class BafflingBirthdays
{
    private static readonly Random random = new Random();

    public static DateOnly[] RandomBirthdates(int numberOfBirthdays)
    {
        DateOnly[] dates = new DateOnly[numberOfBirthdays];
        for (int i = 0; i < numberOfBirthdays; i++)
        {
            int dayOfYear = random.Next(1, 366);
            // Використовуємо невисокосний рік (1999)
            dates[i] = new DateOnly(1999, 1, 1).AddDays(dayOfYear - 1);
        }
        return dates;
    }

    public static bool SharedBirthday(DateOnly[] birthdays)
    {
        return birthdays
            .Select(d => (d.Month, d.Day))
            .Distinct()
            .Count() < birthdays.Length;
    }

    public static double EstimatedProbabilityOfSharedBirthday(int numberOfBirthdays)
    {
        int trials = 10000;
        int sharedCount = 0;

        for (int i = 0; i < trials; i++)
        {
            var dates = RandomBirthdates(numberOfBirthdays);
            if (SharedBirthday(dates))
                sharedCount++;
        }

        // Повертати у відсотках, не у частках
        return (double)sharedCount / trials * 100;
    }
}
